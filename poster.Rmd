---
title: "Untitled"
author: "Robert Day"
date: "7/11/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# prologue

In 2013 EPSM came to Perth. In the weeks leading up to the meeting there was an 
Out of interest 

# modus

Just as all happy families are the same, so all happy data analyses are alike.
They all follow the tripartite path of the UG[^1^] syllogism:

  * munge
  * analyse
  * present
  
## raw data presentation

The submission data from [http://theconferencecompany.com] came in an Excel&trade;
workbook with several sheets, formatted to their requirements.
One sheet had details of the EPSM 2019 abstracts, 
without dates but labelled in submission order.
EPSM and AOCMP abstracts were not separately identified, 
so a list of ID numbers for AOCMP abstracts, supplied separately by email was used to classify the abstracts.
This list was saved as a single column ``.csv`` file.


A second sheet had the number of submissions per day for the EPSM meetings in Hobart 2017, Adelaide 2018 and Perth 2019.
Dates were given as days prior to the conference opening date, in order to be able to compare conferences with different dates across years.
The columns for date and submissions were extracted from this sheet and saved as a ```.csv``` file, as was the complete sheet of abstract details.
Submissions from EPSM 2013 were already in a ```.csv``` file using calendar dates.
These were converted to days prior to allow comparison.

Finally, significant dates for each conference were gathered from emails and previous conference websites, making use of [http://www.archive.org] as needed.

## munge to canonical form

EPSM and AOCMP submissions were seperated in a two stage process.
First the list of AOCMP ID numbers was used to label the submisison ID by conference.
Then the 

```{r munge}
library(data.table)
library(ggplot2)

# load the raw submission data to get a submission date for each paper
# need this to sort out which were EPSM and which AOCMP, as only have
# paper numbers for AOCMP

MS <- fread("mixed_submissions.csv")

# write out as seperate files for each conference, 
# to make future re-use easier (I hope)
for (conf in names(MS)[-1]) { 
  cols  <- c("day_prior", conf)
  write.csv(na.omit(MS[, ..cols]),
            file = paste0(conf, ".csv")
            )
}

MS_days <- MS[!is.na(Perth_2019), rep(day_prior, Perth_2019)]

P19 <- fread("Perth_2019_subs.csv")
setnames(P19, c("ID", "org", "city", "state", "country", "code", 
                "theme","sub_theme", "paper", "conference"))

# note enough submission days in the MS sheet, 
# so assume the rest were all submitted on the last day?
all_days <- c(MS_days, rep(last(MS_days), nrow(P19)-length(MS_days)))
P19[, day_prior := all_days]
```

# analyse this

# show and tell

# just, why?

# sharing the blame
[^1^]: Expressed most clearly in the Underpants Gnome credo

 1. collect underpants
 2. ???
 3. profit!
