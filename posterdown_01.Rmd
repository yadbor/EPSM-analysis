---
main_topsize: 0.2 #percent coverage of the poster
main_bottomsize: 0.1
#ESSENTIALS
title: '**A Better Reproducible Poster Title**'
author:
  - name: Robert Day
    affil: 1
    main: true
  - name: Tegan Rourke
    affil: 2
  - name: Hilary Cottam
    affil: 3
affiliation:
  - num: 1
    address: Health Technology Management Unit, EMHS
  - num: 2
    address: Medical Technology & Physics, Sir Charles Gairdner Hospital
  - num: 3
    address: The Conference Company
main_findings:
  - "**EPSM** submitters as optimisitc as they were in 2013.<br>**AOCMP** submitters are more punctual."
logoleft_name: https&#58;//raw.githubusercontent.com/brentthorne/posterdown/master/images/betterhexlogo.png
logoright_name: https&#58;//raw.githubusercontent.com/brentthorne/posterdown/master/images/betterhexlogo.png
logocenter_name: https&#58;//raw.githubusercontent.com/brentthorne/posterdown/master/images/qr-code-black.png
output: 
  posterdown::posterdown_betterport:
    self_contained: false
    pandoc_args: --mathjax
    number_sections: false
bibliography: packages.bib
link-citations: true
---

```{r, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      tidy = FALSE,
                      message = FALSE,
                      fig.align = 'center',
                      out.width = "100%")
options(knitr.table.format = "html") 
```

# the prologue...

When EPSM came to Perth in 2013, for various reasons the WA branch members organised the abstract submissions, scheduling and production of the abstract book. Just like the old days. This gave us direct access to the submission data, so we Scienced it. What we saw was that people: 

 a) left their submission to the very last minute
 b) *definitely* expected a deadline extension
 c) still left their submission to the very last minute

Has anything changed since then?


This is the `posterdown_betterport` template for the {posterdown} package! I was inspired by the twitter thread of [Mike Morrison](https://mobile.twitter.com/mikemorrison/status/1110191245035479041) and wanted to apply the `#betterposter` concept to the reproducible (yet simple to use) functionality of the {posterdown} package [@R-posterdown]. If you're not an R user don't sweat as you do **NOT** need to use it at all! Feel free to use only the Markdown functionality of this package :)

```{r, include=FALSE}
knitr::write_bib(c('posterdown', 'rmarkdown','pagedown'), 'packages.bib')
```

## shiny, happy data

The initial raw data contained information that could be used to identify individual papers or submitters. 
To protect everyone's secret identities, these data were scrubbed clean. At the same time they were rearranged into a single standard format for comparison between meetings. 
Only the sparkling clean data are included in this project.


```{r cload clean}
# Read the significant dates and convert them all to days-before-conference,
# then rearrange to long format for easier plotting.
events <- fread(file.path(clean_path, "conf.dates.csv"))
# make a conference column that matches the other tables
events[, conference := paste(city, year, sep = "_")]
# calculate how long each period was
days_allowed <- events[, .(total    = as.integer(difftime(call, date)),
                           initial  = as.integer(difftime(call, close)),
                           extended = as.integer(difftime(close, extended)),
                           waiting  = as.integer(difftime(extended, date))
                           ), 
                           by="conference,year,city"
                       ]
# Make conference an ordered factor so ggplot doesn't rearrange
days_allowed[, conference := factor(conference, levels = rev(conference))]
# convert to long for for plotting
days_long <- melt(days_allowed, 
                  measure.vars = c("initial", "extended", "waiting"), 
                  variable.name = "period",
                  value.name = "days"
                  )

#Finally, load the submission days for all the conferences into a unified format.
sub_file_names <- file.path(clean_path, paste0(events[, conference], ".csv"))
#sub_files[, filename := file.path(clean_path, paste0(conference, ".csv"))]
SUBS <- data.table::data.table(conference = events[, conference],
                               filename   = sub_file_names)
SUBS <- SUBS[, fread(filename, col.names = c("day_prior", "n")), by=conference]
```

# Results

```{r fig.cap='Time allowed for submissions by conference', out.width="80%"}
# Use a colourblind friendly palette with grey
ggplot(days_long) + 
  aes(x = conference, y = days, fill = period) +
  geom_col(width = 0.5) +
  scale_fill_manual(name = "Submission\nPeriod",
                    breaks = c("initial", "extended"), 
                    values=c("#56B4E9", "#E69F00", NA)) +
  geom_hline(yintercept = 0, colour = "black") +
  geom_vline(xintercept = 3.5, linetype = 2, size = 0.1) +
  ylab("days before meeting") +
  theme(legend.position=c(.80, .8)) +
  coord_flip()

```

EPSM conferences vary in the length of time they allow for submitting abstracts, 
although they all call for papers about `r round(abs(days_allowed[, mean(total)]), -1)` days before the conference.
EPSM 2013 in Perth looks like a bit of an outlier, starting earlier and running longer,
with an extension period about twice that of other conferences.
These meant that there was less time between the last submisison and the conference starting.
```{r duration_table, echo=FALSE}
print(days_allowed[city != "AOCMP", 
                   lapply(.SD, function (x) -1*x), 
                   .SDcols = c("total", "initial", "extended", "waiting"), 
                   by = "year,city"
                   ]
      )
```

There were plenty of papers at each conference.
Perth 2019 is a monster with the assistance of AOCMP.
```{r}
print(SUBS[, .(total = sum(n)), by=conference])
```


To get a better understanding of how to include features like these please refer to the {posterdown} [wiki](https://github.com/posterdown/wiki).


Here you may have some figures to show off, bellow I have made a scatterplot with the infamous Iris dataset and I can even reference to the figure automatically like this, `Figure \@ref(fig:irisfigure)`, Figure \@ref(fig:irisfigure).

```{r, irisfigure, fig.cap='Here is a caption for the figure. This can be added by using the "fig.cap" option in the r code chunk options, see this [link](https://yihui.name/knitr/options/#plots) from the legend himself, [Yihui Xie](https://twitter.com/xieyihui).', out.width="80%"}
par(mar=c(2,2,0,1))
plot(x = iris$Sepal.Length, y = iris$Sepal.Width,
     col = iris$Species, pch = 19, xlab = "Sepal Length",
     ylab = "Sepal Width")
```

Maybe you want to show off some of that fancy code you spent so much time on to make that figure, well you can do that too! Just use the `echo=TRUE` option in the r code chunk options, Figure \@ref(fig:myprettycode)!

```{r myprettycode, echo=TRUE, fig.cap='Boxplots, so hot right now!', fig.height=6, out.width="80%"}
#trim whitespace
par(mar=c(2,2,0,0))
#plot boxplots
boxplot(iris$Sepal.Width~iris$Species,
        col = "#008080", 
        border = "#0b4545",
        ylab = "Sepal Width (cm)",
        xlab = "Species")
```

How about a neat table of data? See, Table \@ref(tab:iristable):

```{r, iristable}
knitr::kable(
  iris[1:15,1:5], format = "html",
  caption = "A table made with the **knitr::kable** function.",
  align = "c", col.names = c("Sepal <br> Length",
                             "Sepal <br> Width",
                             "Petal <br> Length",
                             "Petal <br> Width",
                             "Species"),
  escape = FALSE)
```

# embrace & extend

To add another conference to this study, several steps

1. add the relevant dates to conf.dates.csv

This has one row for each meeting, with six columns

name     | type | contents
----     | ---- | ---------- 
city     | string | the name of the city where the conference was held
year     | YYYY | a four digit year
date     | YYYY-MM-DD | the date the meeting starts, in ISO format
call     | YYYY-MM-DD | when the call for papers went out, in ISO format 
close    | YYYY-MM-DD | when submissions closed, in ISO format
extended | YYYY-MM-DD | when they *really* closed, in ISO format

Note that for 2019 there were two meetings in the one city, so AOCMP became a city.


# References

# Colophon

This poster was made with the `posterdown_betterport` template for the {posterdown} [package](https://github.com/brentthorne/posterdown), in an attempt to sell the idea of Reproduceable Research.

The complete package, including the cleaned data and all the poster templates




I was inspired by the twitter thread of [Mike Morrison](https://mobile.twitter.com/mikemorrison/status/1110191245035479041) and wanted to apply the `#betterposter` concept to the reproducible (yet simple to use) functionality of the {posterdown}